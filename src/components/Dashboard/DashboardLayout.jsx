import { useLocation, useNavigate, Outlet } from "react-router-dom";
import Box from "@mui/material/Box";
import Typography from "@mui/material/Typography";
import Divider from "@mui/material/Divider";
import { Toolbar, IconButton, Avatar, Menu, MenuItem } from "@mui/material";
import avatar from "../../assets/images/userimg.png";
import logo from "../../assets/images/ge3s.png";
import "./Dashboard.css";
import { useState, useMemo } from "react";
import ConfirmationModal from "../Modals/ConfirmationModal";
import { useAuth } from "../../context/AuthContext";
import SubscriptionModal from "./SubscriptionPlans/SubscriptionModal";

const CustomBadgeIcon = ({ badgeContent, badgeColor, badgeTextColor }) => {
  return (
    <>
      <div
        style={{
          display: "flex",
          flexDirection: "column",
          justifyContent: "center",
          alignItems: "center",
          position: "relative",
        }}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="20"
          viewBox="0 0 24 22"
          fill="none"
        >
          <path
            d="M3.0018 10C3.0018 7.61305 3.95001 5.32387 5.63784 3.63604C7.32566 1.94821 9.61485 1 12.0018 1C14.3887 1 16.6779 1.94821 18.3658 3.63604C20.0536 5.32387 21.0018 7.61305 21.0018 10C21.0018 14.4775 22.0393 18.075 22.8643 19.5C22.9519 19.6518 22.9981 19.8239 22.9983 19.9991C22.9984 20.1744 22.9525 20.3466 22.8652 20.4985C22.7778 20.6504 22.6521 20.7767 22.5006 20.8647C22.349 20.9527 22.177 20.9994 22.0018 21H2.0018C1.82677 20.9989 1.65509 20.952 1.50391 20.8638C1.35272 20.7756 1.22734 20.6492 1.14028 20.4974C1.05323 20.3456 1.00755 20.1735 1.00781 19.9985C1.00808 19.8235 1.05428 19.6516 1.1418 19.5C1.96555 18.075 3.0018 14.4763 3.0018 10Z"
            stroke="url(#paint0_linear_1551_21164)"
            strokeWidth="1.5"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <defs>
            <linearGradient
              id="paint0_linear_1551_21164"
              x1="1.00781"
              y1="1"
              x2="26.2497"
              y2="6.7659"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#369D9C" />
              <stop offset="1" stopColor="#28814D" />
            </linearGradient>
          </defs>
        </svg>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="9"
          height="4"
          viewBox="0 0 8 4"
          fill="none"
          style={{ position: "absolute", top: "18px", right: "0.25rem" }}
        >
          <path
            d="M0 0C0 1.06087 0.421427 2.07828 1.17157 2.82843C1.92172 3.57857 2.93913 4 4 4C5.06087 4 6.07828 3.57857 6.82843 2.82843C7.57857 2.07828 8 1.06087 8 0"
            fill="url(#paint0_linear_2080_5264)"
          />
          <defs>
            <linearGradient
              id="paint0_linear_2080_5264"
              x1="0"
              y1="0"
              x2="8.23953"
              y2="3.42352"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#369D9C" />
              <stop offset="1" stopColor="#28814D" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <span
        className="custom-badge"
        style={{
          position: "absolute",
          top: "3px",
          right: "3px",
          fontSize: "0.4rem",
          fontWeight: "bold",
          width: "16px",
          height: "16px",
          borderRadius: "50%",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          border: "2px solid white",
          background: badgeColor,
          color: badgeTextColor,
        }}
      >
        {badgeContent}
      </span>
    </>
  );
};

const navMenu = [
  {
    segment: "",
    title: "Dashboard",
    icon_normal: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <path
          d="M3.5 10.472C3.5 4.73055 4.73055 3.5 10.472 3.5H17.528C23.2694 3.5 24.5 4.73055 24.5 10.472V17.528C24.5 23.2694 23.2694 24.5 17.528 24.5H10.472C4.73055 24.5 3.5 23.2694 3.5 17.528V10.472Z"
          stroke="#717171"
          strokeWidth="2.33333"
        />
        <path
          d="M24.5 10.5H3.5"
          stroke="#717171"
          strokeWidth="2.33333"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M10.5 24.5V10.5"
          stroke="#717171"
          strokeWidth="2.33333"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
    ),
    icon_clicked: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <path
          d="M3.5 10.472C3.5 4.73055 4.73055 3.5 10.472 3.5H17.528C23.2694 3.5 24.5 4.73055 24.5 10.472V17.528C24.5 23.2694 23.2694 24.5 17.528 24.5H10.472C4.73055 24.5 3.5 23.2694 3.5 17.528V10.472Z"
          stroke="black"
          strokeWidth="2.33333"
        />
        <path
          d="M24.5 10.5H3.5"
          stroke="black"
          strokeWidth="2.33333"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M10.5 24.5V10.5"
          stroke="black"
          strokeWidth="2.33333"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
    ),
  },
  {
    segment: "report",
    title: "Report",
    icon_normal: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <g clipPath="url(#clip0_1521_24370)">
          <path
            d="M21.875 28H6.125C5.42881 28 4.76113 27.7234 4.26884 27.2312C3.77656 26.7389 3.5 26.0712 3.5 25.375V6.125C3.5 5.42881 3.77656 4.76113 4.26884 4.26884C4.76113 3.77656 5.42881 3.5 6.125 3.5H7C7.23206 3.5 7.45462 3.59219 7.61872 3.75628C7.78281 3.92038 7.875 4.14294 7.875 4.375C7.875 4.60706 7.78281 4.82962 7.61872 4.99372C7.45462 5.15781 7.23206 5.25 7 5.25H6.125C5.89294 5.25 5.67038 5.34219 5.50628 5.50628C5.34219 5.67038 5.25 5.89294 5.25 6.125V25.375C5.25 25.6071 5.34219 25.8296 5.50628 25.9937C5.67038 26.1578 5.89294 26.25 6.125 26.25H21.875C22.1071 26.25 22.3296 26.1578 22.4937 25.9937C22.6578 25.8296 22.75 25.6071 22.75 25.375V14C22.75 13.7679 22.8422 13.5454 23.0063 13.3813C23.1704 13.2172 23.3929 13.125 23.625 13.125C23.8571 13.125 24.0796 13.2172 24.2437 13.3813C24.4078 13.5454 24.5 13.7679 24.5 14V25.375C24.5 26.0712 24.2234 26.7389 23.7312 27.2312C23.2389 27.7234 22.5712 28 21.875 28Z"
            fill="#717171"
          />
          <path
            d="M23.625 16C23.3929 16 23.1704 15.9078 23.0063 15.7437C22.8422 15.5796 22.75 15.3571 22.75 15.125V6.125C22.75 5.89294 22.6578 5.67038 22.4937 5.50628C22.3296 5.34219 22.1071 5.25 21.875 5.25H17.5C17.2679 5.25 17.0454 5.15781 16.8813 4.99372C16.7172 4.82962 16.625 4.60706 16.625 4.375C16.625 4.14294 16.7172 3.92038 16.8813 3.75628C17.0454 3.59219 17.2679 3.5 17.5 3.5H21.875C22.5712 3.5 23.2389 3.77656 23.7312 4.26884C24.2234 4.76113 24.5 5.42881 24.5 6.125V15.125C24.5 15.3571 24.4078 15.5796 24.2437 15.7437C24.0796 15.9078 23.8571 16 23.625 16Z"
            fill="#717171"
          />
          <path
            d="M16.625 7H11.375C10.9109 7 10.4658 6.81563 10.1376 6.48744C9.80937 6.15925 9.625 5.71413 9.625 5.25V3.5C9.625 3.03587 9.80937 2.59075 10.1376 2.26256C10.4658 1.93437 10.9109 1.75 11.375 1.75H16.625C17.0891 1.75 17.5342 1.93437 17.8624 2.26256C18.1906 2.59075 18.375 3.03587 18.375 3.5V5.25C18.375 5.71413 18.1906 6.15925 17.8624 6.48744C17.5342 6.81563 17.0891 7 16.625 7ZM11.375 3.5V5.25H16.625V3.5H11.375Z"
            fill="#717171"
          />
          <path
            d="M14 3.5C13.7679 3.5 13.5454 3.40781 13.3813 3.24372C13.2172 3.07962 13.125 2.85706 13.125 2.625V0.875C13.125 0.642936 13.2172 0.420376 13.3813 0.256282C13.5454 0.0921872 13.7679 0 14 0C14.2321 0 14.4546 0.0921872 14.6187 0.256282C14.7828 0.420376 14.875 0.642936 14.875 0.875V2.625C14.875 2.85706 14.7828 3.07962 14.6187 3.24372C14.4546 3.40781 14.2321 3.5 14 3.5Z"
            fill="#717171"
          />
          <path
            d="M11.375 14.875H7.875C7.64294 14.875 7.42038 14.7828 7.25628 14.6187C7.09219 14.4546 7 14.2321 7 14V10.5C7 10.2679 7.09219 10.0454 7.25628 9.88128C7.42038 9.71719 7.64294 9.625 7.875 9.625H11.375C11.6071 9.625 11.8296 9.71719 11.9937 9.88128C12.1578 10.0454 12.25 10.2679 12.25 10.5V14C12.25 14.2321 12.1578 14.4546 11.9937 14.6187C11.8296 14.7828 11.6071 14.875 11.375 14.875ZM8.75 13.125H10.5V11.375H8.75V13.125Z"
            fill="#717171"
          />
          <path
            d="M11.375 22.75H7.875C7.64294 22.75 7.42038 22.6578 7.25628 22.4937C7.09219 22.3296 7 22.1071 7 21.875V18.375C7 18.1429 7.09219 17.9204 7.25628 17.7563C7.42038 17.5922 7.64294 17.5 7.875 17.5H11.375C11.6071 17.5 11.8296 17.5922 11.9937 17.7563C12.1578 17.9204 12.25 18.1429 12.25 18.375V21.875C12.25 22.1071 12.1578 22.3296 11.9937 22.4937C11.8296 22.6578 11.6071 22.75 11.375 22.75ZM8.75 21H10.5V19.25H8.75V21Z"
            fill="#717171"
          />
          <path
            d="M20.125 13.125H14.875C14.6429 13.125 14.4204 13.0328 14.2563 12.8687C14.0922 12.7046 14 12.4821 14 12.25C14 12.0179 14.0922 11.7954 14.2563 11.6313C14.4204 11.4672 14.6429 11.375 14.875 11.375H20.125C20.3571 11.375 20.5796 11.4672 20.7437 11.6313C20.9078 11.7954 21 12.0179 21 12.25C21 12.4821 20.9078 12.7046 20.7437 12.8687C20.5796 13.0328 20.3571 13.125 20.125 13.125Z"
            fill="#717171"
          />
          <path
            d="M20.125 21H14.875C14.6429 21 14.4204 20.9078 14.2563 20.7437C14.0922 20.5796 14 20.3571 14 20.125C14 19.8929 14.0922 19.6704 14.2563 19.5063C14.4204 19.3422 14.6429 19.25 14.875 19.25H20.125C20.3571 19.25 20.5796 19.3422 20.7437 19.5063C20.9078 19.6704 21 19.8929 21 20.125C21 20.3571 20.9078 20.5796 20.7437 20.7437C20.5796 20.9078 20.3571 21 20.125 21Z"
            fill="#717171"
          />
        </g>
        <defs>
          <clipPath id="clip0_1521_24370">
            <rect width="28" height="28" fill="white" />
          </clipPath>
        </defs>
      </svg>
    ),
    icon_clicked: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <g clipPath="url(#clip0_1521_24370)">
          <path
            d="M21.875 28H6.125C5.42881 28 4.76113 27.7234 4.26884 27.2312C3.77656 26.7389 3.5 26.0712 3.5 25.375V6.125C3.5 5.42881 3.77656 4.76113 4.26884 4.26884C4.76113 3.77656 5.42881 3.5 6.125 3.5H7C7.23206 3.5 7.45462 3.59219 7.61872 3.75628C7.78281 3.92038 7.875 4.14294 7.875 4.375C7.875 4.60706 7.78281 4.82962 7.61872 4.99372C7.45462 5.15781 7.23206 5.25 7 5.25H6.125C5.89294 5.25 5.67038 5.34219 5.50628 5.50628C5.34219 5.67038 5.25 5.89294 5.25 6.125V25.375C5.25 25.6071 5.34219 25.8296 5.50628 25.9937C5.67038 26.1578 5.89294 26.25 6.125 26.25H21.875C22.1071 26.25 22.3296 26.1578 22.4937 25.9937C22.6578 25.8296 22.75 25.6071 22.75 25.375V14C22.75 13.7679 22.8422 13.5454 23.0063 13.3813C23.1704 13.2172 23.3929 13.125 23.625 13.125C23.8571 13.125 24.0796 13.2172 24.2437 13.3813C24.4078 13.5454 24.5 13.7679 24.5 14V25.375C24.5 26.0712 24.2234 26.7389 23.7312 27.2312C23.2389 27.7234 22.5712 28 21.875 28Z"
            fill="black"
          />
          <path
            d="M23.625 16C23.3929 16 23.1704 15.9078 23.0063 15.7437C22.8422 15.5796 22.75 15.3571 22.75 15.125V6.125C22.75 5.89294 22.6578 5.67038 22.4937 5.50628C22.3296 5.34219 22.1071 5.25 21.875 5.25H17.5C17.2679 5.25 17.0454 5.15781 16.8813 4.99372C16.7172 4.82962 16.625 4.60706 16.625 4.375C16.625 4.14294 16.7172 3.92038 16.8813 3.75628C17.0454 3.59219 17.2679 3.5 17.5 3.5H21.875C22.5712 3.5 23.2389 3.77656 23.7312 4.26884C24.2234 4.76113 24.5 5.42881 24.5 6.125V15.125C24.5 15.3571 24.4078 15.5796 24.2437 15.7437C24.0796 15.9078 23.8571 16 23.625 16Z"
            fill="black"
          />
          <path
            d="M16.625 7H11.375C10.9109 7 10.4658 6.81563 10.1376 6.48744C9.80937 6.15925 9.625 5.71413 9.625 5.25V3.5C9.625 3.03587 9.80937 2.59075 10.1376 2.26256C10.4658 1.93437 10.9109 1.75 11.375 1.75H16.625C17.0891 1.75 17.5342 1.93437 17.8624 2.26256C18.1906 2.59075 18.375 3.03587 18.375 3.5V5.25C18.375 5.71413 18.1906 6.15925 17.8624 6.48744C17.5342 6.81563 17.0891 7 16.625 7ZM11.375 3.5V5.25H16.625V3.5H11.375Z"
            fill="black"
          />
          <path
            d="M14 3.5C13.7679 3.5 13.5454 3.40781 13.3813 3.24372C13.2172 3.07962 13.125 2.85706 13.125 2.625V0.875C13.125 0.642936 13.2172 0.420376 13.3813 0.256282C13.5454 0.0921872 13.7679 0 14 0C14.2321 0 14.4546 0.0921872 14.6187 0.256282C14.7828 0.420376 14.875 0.642936 14.875 0.875V2.625C14.875 2.85706 14.7828 3.07962 14.6187 3.24372C14.4546 3.40781 14.2321 3.5 14 3.5Z"
            fill="black"
          />
          <path
            d="M11.375 14.875H7.875C7.64294 14.875 7.42038 14.7828 7.25628 14.6187C7.09219 14.4546 7 14.2321 7 14V10.5C7 10.2679 7.09219 10.0454 7.25628 9.88128C7.42038 9.71719 7.64294 9.625 7.875 9.625H11.375C11.6071 9.625 11.8296 9.71719 11.9937 9.88128C12.1578 10.0454 12.25 10.2679 12.25 10.5V14C12.25 14.2321 12.1578 14.4546 11.9937 14.6187C11.8296 14.7828 11.6071 14.875 11.375 14.875ZM8.75 13.125H10.5V11.375H8.75V13.125Z"
            fill="black"
          />
          <path
            d="M11.375 22.75H7.875C7.64294 22.75 7.42038 22.6578 7.25628 22.4937C7.09219 22.3296 7 22.1071 7 21.875V18.375C7 18.1429 7.09219 17.9204 7.25628 17.7563C7.42038 17.5922 7.64294 17.5 7.875 17.5H11.375C11.6071 17.5 11.8296 17.5922 11.9937 17.7563C12.1578 17.9204 12.25 18.1429 12.25 18.375V21.875C12.25 22.1071 12.1578 22.3296 11.9937 22.4937C11.8296 22.6578 11.6071 22.75 11.375 22.75ZM8.75 21H10.5V19.25H8.75V21Z"
            fill="black"
          />
          <path
            d="M20.125 13.125H14.875C14.6429 13.125 14.4204 13.0328 14.2563 12.8687C14.0922 12.7046 14 12.4821 14 12.25C14 12.0179 14.0922 11.7954 14.2563 11.6313C14.4204 11.4672 14.6429 11.375 14.875 11.375H20.125C20.3571 11.375 20.5796 11.4672 20.7437 11.6313C20.9078 11.7954 21 12.0179 21 12.25C21 12.4821 20.9078 12.7046 20.7437 12.8687C20.5796 13.0328 20.3571 13.125 20.125 13.125Z"
            fill="black"
          />
          <path
            d="M20.125 21H14.875C14.6429 21 14.4204 20.9078 14.2563 20.7437C14.0922 20.5796 14 20.3571 14 20.125C14 19.8929 14.0922 19.6704 14.2563 19.5063C14.4204 19.3422 14.6429 19.25 14.875 19.25H20.125C20.3571 19.25 20.5796 19.3422 20.7437 19.5063C20.9078 19.6704 21 19.8929 21 20.125C21 20.3571 20.9078 20.5796 20.7437 20.7437C20.5796 20.9078 20.3571 21 20.125 21Z"
            fill="black"
          />
        </g>
        <defs>
          <clipPath id="clip0_1521_24370">
            <rect width="28" height="28" fill="white" />
          </clipPath>
        </defs>
      </svg>
    ),
  },
  // {
  //   segment: "facilities",
  //   title: "Facilities",
  //   icon_normal: (
  //     <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
  //       <g clipPath="url(#clip0_1521_24382)">
  //         <path
  //           d="M6.125 11.375H2.625C2.14175 11.375 1.75 11.7668 1.75 12.25V15.75C1.75 16.2332 2.14175 16.625 2.625 16.625H6.125C6.60825 16.625 7 16.2332 7 15.75V12.25C7 11.7668 6.60825 11.375 6.125 11.375Z"
  //           stroke="#717171"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M22.75 4.375H17.5C17.0168 4.375 16.625 4.76675 16.625 5.25V10.5C16.625 10.9832 17.0168 11.375 17.5 11.375H22.75C23.2332 11.375 23.625 10.9832 23.625 10.5V5.25C23.625 4.76675 23.2332 4.375 22.75 4.375Z"
  //           stroke="#717171"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M22.75 16.625H17.5C17.0168 16.625 16.625 17.0168 16.625 17.5V22.75C16.625 23.2332 17.0168 23.625 17.5 23.625H22.75C23.2332 23.625 23.625 23.2332 23.625 22.75V17.5C23.625 17.0168 23.2332 16.625 22.75 16.625Z"
  //           stroke="#717171"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M7 14H12.25"
  //           stroke="#717171"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M16.625 20.125H14C13.5359 20.125 13.0908 19.9406 12.7626 19.6124C12.4344 19.2842 12.25 18.8391 12.25 18.375V9.625C12.25 9.16087 12.4344 8.71575 12.7626 8.38756C13.0908 8.05937 13.5359 7.875 14 7.875H16.625"
  //           stroke="#717171"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //       </g>
  //       <defs>
  //         <clipPath id="clip0_1521_24382">
  //           <rect width="28" height="28" fill="white" />
  //         </clipPath>
  //       </defs>
  //     </svg>
  //   ),
  //   icon_clicked: (
  //     <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
  //       <g clipPath="url(#clip0_1521_24382)">
  //         <path
  //           d="M6.125 11.375H2.625C2.14175 11.375 1.75 11.7668 1.75 12.25V15.75C1.75 16.2332 2.14175 16.625 2.625 16.625H6.125C6.60825 16.625 7 16.2332 7 15.75V12.25C7 11.7668 6.60825 11.375 6.125 11.375Z"
  //           stroke="black"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M22.75 4.375H17.5C17.0168 4.375 16.625 4.76675 16.625 5.25V10.5C16.625 10.9832 17.0168 11.375 17.5 11.375H22.75C23.2332 11.375 23.625 10.9832 23.625 10.5V5.25C23.625 4.76675 23.2332 4.375 22.75 4.375Z"
  //           stroke="black"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M22.75 16.625H17.5C17.0168 16.625 16.625 17.0168 16.625 17.5V22.75C16.625 23.2332 17.0168 23.625 17.5 23.625H22.75C23.2332 23.625 23.625 23.2332 23.625 22.75V17.5C23.625 17.0168 23.2332 16.625 22.75 16.625Z"
  //           stroke="black"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M7 14H12.25"
  //           stroke="black"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //         <path
  //           d="M16.625 20.125H14C13.5359 20.125 13.0908 19.9406 12.7626 19.6124C12.4344 19.2842 12.25 18.8391 12.25 18.375V9.625C12.25 9.16087 12.4344 8.71575 12.7626 8.38756C13.0908 8.05937 13.5359 7.875 14 7.875H16.625"
  //           stroke="black"
  //           strokeWidth="1.5"
  //           strokeLinecap="round"
  //           strokeLinejoin="round"
  //         />
  //       </g>
  //       <defs>
  //         <clipPath id="clip0_1521_24382">
  //           <rect width="28" height="28" fill="white" />
  //         </clipPath>
  //       </defs>
  //     </svg>
  //   ),
  // },
  // {
  //   segment: "team-member",
  //   title: "Team Members",
  //   icon_normal: (
  //     <svg width="22" height="22" viewBox="0 0 35 35" fill="none">
  //       <path
  //         d="M7.875 11.8125C7.875 10.7682 8.28984 9.76669 9.02827 9.02827C9.76669 8.28984 10.7682 7.875 11.8125 7.875C12.8568 7.875 13.8583 8.28984 14.5967 9.02827C15.3352 9.76669 15.75 10.7682 15.75 11.8125C15.75 12.8568 15.3352 13.8583 14.5967 14.5967C13.8583 15.3352 12.8568 15.75 11.8125 15.75C10.7682 15.75 9.76669 15.3352 9.02827 14.5967C8.28984 13.8583 7.875 12.8568 7.875 11.8125ZM11.8125 6.125C10.3041 6.125 8.85744 6.72422 7.79083 7.79083C6.72422 8.85744 6.125 10.3041 6.125 11.8125C6.125 13.3209 6.72422 14.7676 7.79083 15.8342C8.85744 16.9008 10.3041 17.5 11.8125 17.5C13.3209 17.5 14.7676 16.9008 15.8342 15.8342C16.9008 14.7676 17.5 13.3209 17.5 11.8125C17.5 10.3041 16.9008 8.85744 15.8342 7.79083C14.7676 6.72422 13.3209 6.125 11.8125 6.125ZM21.7648 26.5037C22.7063 26.8888 23.891 27.125 25.375 27.125C28.6667 27.125 30.4867 25.956 31.4457 24.6155C31.9472 23.9126 32.261 23.0935 32.3575 22.2355C32.3661 22.1558 32.3719 22.0758 32.375 21.9958V21.875C32.375 21.5303 32.3071 21.1889 32.1752 20.8705C32.0433 20.552 31.8499 20.2626 31.6062 20.0188C31.3624 19.7751 31.073 19.5817 30.7545 19.4498C30.4361 19.3179 30.0947 19.25 29.75 19.25H21.6475C22.0675 19.7575 22.3825 20.3507 22.5662 21H29.75C29.9821 21 30.2046 21.0922 30.3687 21.2563C30.5328 21.4204 30.625 21.6429 30.625 21.875V21.9695L30.6163 22.057C30.5505 22.6122 30.3459 23.1419 30.0213 23.597C29.449 24.4002 28.2065 25.375 25.375 25.375C24.094 25.375 23.1385 25.1755 22.4227 24.8832C22.2792 25.3732 22.071 25.9263 21.7648 26.5037ZM2.625 22.75C2.625 21.8217 2.99375 20.9315 3.65013 20.2751C4.3065 19.6187 5.19674 19.25 6.125 19.25H17.5C18.4283 19.25 19.3185 19.6187 19.9749 20.2751C20.6313 20.9315 21 21.8217 21 22.75V22.897L20.9965 22.967L20.979 23.2032C20.855 24.3374 20.4522 25.4231 19.8065 26.3637C18.5798 28.14 16.2102 29.75 11.8125 29.75C7.41475 29.75 5.04525 28.14 3.8185 26.3655C3.17257 25.4244 2.76975 24.338 2.646 23.2032C2.63602 23.1014 2.62901 22.9993 2.625 22.897V22.75ZM4.375 22.855V22.8865L4.38725 23.0317C4.48221 23.8706 4.78145 24.6734 5.25875 25.3697C6.111 26.6017 7.89775 28 11.8125 28C15.7273 28 17.514 26.6017 18.3663 25.3697C18.8435 24.6734 19.1428 23.8706 19.2378 23.0317C19.2448 22.9653 19.2482 22.9168 19.2482 22.8865L19.25 22.8568V22.75C19.25 22.2859 19.0656 21.8408 18.7374 21.5126C18.4092 21.1844 17.9641 21 17.5 21H6.125C5.66087 21 5.21575 21.1844 4.88756 21.5126C4.55937 21.8408 4.375 22.2859 4.375 22.75V22.855ZM22.75 13.125C22.75 12.4288 23.0266 11.7611 23.5188 11.2688C24.0111 10.7766 24.6788 10.5 25.375 10.5C26.0712 10.5 26.7389 10.7766 27.2312 11.2688C27.7234 11.7611 28 12.4288 28 13.125C28 13.8212 27.7234 14.4889 27.2312 14.9812C26.7389 15.4734 26.0712 15.75 25.375 15.75C24.6788 15.75 24.0111 15.4734 23.5188 14.9812C23.0266 14.4889 22.75 13.8212 22.75 13.125ZM25.375 8.75C24.2147 8.75 23.1019 9.21094 22.2814 10.0314C21.4609 10.8519 21 11.9647 21 13.125C21 14.2853 21.4609 15.3981 22.2814 16.2186C23.1019 17.0391 24.2147 17.5 25.375 17.5C26.5353 17.5 27.6481 17.0391 28.4686 16.2186C29.2891 15.3981 29.75 14.2853 29.75 13.125C29.75 11.9647 29.2891 10.8519 28.4686 10.0314C27.6481 9.21094 26.5353 8.75 25.375 8.75Z"
  //         fill="#717171"
  //       />
  //     </svg>
  //   ),
  //   icon_clicked: (
  //     <svg
  //       xmlns="http://www.w3.org/2000/svg"
  //       width="22"
  //       height="22"
  //       viewBox="0 0 35 35"
  //       fill="none"
  //     >
  //       <path
  //         d="M7.875 11.8125C7.875 10.7682 8.28984 9.76669 9.02827 9.02827C9.76669 8.28984 10.7682 7.875 11.8125 7.875C12.8568 7.875 13.8583 8.28984 14.5967 9.02827C15.3352 9.76669 15.75 10.7682 15.75 11.8125C15.75 12.8568 15.3352 13.8583 14.5967 14.5967C13.8583 15.3352 12.8568 15.75 11.8125 15.75C10.7682 15.75 9.76669 15.3352 9.02827 14.5967C8.28984 13.8583 7.875 12.8568 7.875 11.8125ZM11.8125 6.125C10.3041 6.125 8.85744 6.72422 7.79083 7.79083C6.72422 8.85744 6.125 10.3041 6.125 11.8125C6.125 13.3209 6.72422 14.7676 7.79083 15.8342C8.85744 16.9008 10.3041 17.5 11.8125 17.5C13.3209 17.5 14.7676 16.9008 15.8342 15.8342C16.9008 14.7676 17.5 13.3209 17.5 11.8125C17.5 10.3041 16.9008 8.85744 15.8342 7.79083C14.7676 6.72422 13.3209 6.125 11.8125 6.125ZM21.7648 26.5037C22.7063 26.8888 23.891 27.125 25.375 27.125C28.6667 27.125 30.4867 25.956 31.4457 24.6155C31.9472 23.9126 32.261 23.0935 32.3575 22.2355C32.3661 22.1558 32.3719 22.0758 32.375 21.9958V21.875C32.375 21.5303 32.3071 21.1889 32.1752 20.8705C32.0433 20.552 31.8499 20.2626 31.6062 20.0188C31.3624 19.7751 31.073 19.5817 30.7545 19.4498C30.4361 19.3179 30.0947 19.25 29.75 19.25H21.6475C22.0675 19.7575 22.3825 20.3507 22.5662 21H29.75C29.9821 21 30.2046 21.0922 30.3687 21.2563C30.5328 21.4204 30.625 21.6429 30.625 21.875V21.9695L30.6163 22.057C30.5505 22.6122 30.3459 23.1419 30.0213 23.597C29.449 24.4002 28.2065 25.375 25.375 25.375C24.094 25.375 23.1385 25.1755 22.4227 24.8832C22.2792 25.3732 22.071 25.9263 21.7648 26.5037ZM2.625 22.75C2.625 21.8217 2.99375 20.9315 3.65013 20.2751C4.3065 19.6187 5.19674 19.25 6.125 19.25H17.5C18.4283 19.25 19.3185 19.6187 19.9749 20.2751C20.6313 20.9315 21 21.8217 21 22.75V22.897L20.9965 22.967L20.979 23.2032C20.855 24.3374 20.4522 25.4231 19.8065 26.3637C18.5798 28.14 16.2102 29.75 11.8125 29.75C7.41475 29.75 5.04525 28.14 3.8185 26.3655C3.17257 25.4244 2.76975 24.338 2.646 23.2032C2.63602 23.1014 2.62901 22.9993 2.625 22.897V22.75ZM4.375 22.855V22.8865L4.38725 23.0317C4.48221 23.8706 4.78145 24.6734 5.25875 25.3697C6.111 26.6017 7.89775 28 11.8125 28C15.7273 28 17.514 26.6017 18.3663 25.3697C18.8435 24.6734 19.1428 23.8706 19.2378 23.0317C19.2448 22.9653 19.2482 22.9168 19.2482 22.8865L19.25 22.8568V22.75C19.25 22.2859 19.0656 21.8408 18.7374 21.5126C18.4092 21.1844 17.9641 21 17.5 21H6.125C5.66087 21 5.21575 21.1844 4.88756 21.5126C4.55937 21.8408 4.375 22.2859 4.375 22.75V22.855ZM22.75 13.125C22.75 12.4288 23.0266 11.7611 23.5188 11.2688C24.0111 10.7766 24.6788 10.5 25.375 10.5C26.0712 10.5 26.7389 10.7766 27.2312 11.2688C27.7234 11.7611 28 12.4288 28 13.125C28 13.8212 27.7234 14.4889 27.2312 14.9812C26.7389 15.4734 26.0712 15.75 25.375 15.75C24.6788 15.75 24.0111 15.4734 23.5188 14.9812C23.0266 14.4889 22.75 13.8212 22.75 13.125ZM25.375 8.75C24.2147 8.75 23.1019 9.21094 22.2814 10.0314C21.4609 10.8519 21 11.9647 21 13.125C21 14.2853 21.4609 15.3981 22.2814 16.2186C23.1019 17.0391 24.2147 17.5 25.375 17.5C26.5353 17.5 27.6481 17.0391 28.4686 16.2186C29.2891 15.3981 29.75 14.2853 29.75 13.125C29.75 11.9647 29.2891 10.8519 28.4686 10.0314C27.6481 9.21094 26.5353 8.75 25.375 8.75Z"
  //         fill="black"
  //       />
  //     </svg>
  //   ),
  // },
  {
    segment: "analytics",
    title: "Analytics",
    icon_normal: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <path
          d="M3.67571 15.9121C3.22011 13.453 3.65725 10.912 4.90844 8.74643C6.15963 6.58091 8.1427 4.93311 10.5007 4.09961V11.9746L3.67571 15.9121Z"
          stroke="#717171"
          strokeWidth="1.75"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M14.0033 14.044V3.49805C15.8429 3.49832 17.6502 3.98192 19.2441 4.90041C20.8381 5.8189 22.1627 7.14004 23.0854 8.73154C24.0081 10.323 24.4965 12.129 24.5017 13.9686C24.5068 15.8083 24.0286 17.617 23.1148 19.2136C22.201 20.8103 20.8838 22.1388 19.295 23.0662C17.7062 23.9936 15.9017 24.4873 14.0621 24.4979C12.2225 24.5084 10.4124 24.0355 8.81305 23.1265C7.21372 22.2174 5.8813 20.9041 4.94922 19.318L14.0033 14.044Z"
          stroke="#717171"
          strokeWidth="1.75"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
    ),
    icon_clicked: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <path
          d="M3.67571 15.9121C3.22011 13.453 3.65725 10.912 4.90844 8.74643C6.15963 6.58091 8.1427 4.93311 10.5007 4.09961V11.9746L3.67571 15.9121Z"
          stroke="black"
          strokeWidth="1.75"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M14.0033 14.044V3.49805C15.8429 3.49832 17.6502 3.98192 19.2441 4.90041C20.8381 5.8189 22.1627 7.14004 23.0854 8.73154C24.0081 10.323 24.4965 12.129 24.5017 13.9686C24.5068 15.8083 24.0286 17.617 23.1148 19.2136C22.201 20.8103 20.8838 22.1388 19.295 23.0662C17.7062 23.9936 15.9017 24.4873 14.0621 24.4979C12.2225 24.5084 10.4124 24.0355 8.81305 23.1265C7.21372 22.2174 5.8813 20.9041 4.94922 19.318L14.0033 14.044Z"
          stroke="black"
          strokeWidth="1.75"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
    ),
  },
  {
    segment: "survey",
    title: "Start Survey",
    icon_normal: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <path
          d="M26.0367 3.91699C26.6387 4.2981 27.1344 4.82545 27.4776 5.44987C27.8208 6.0743 28.0002 6.77545 27.9993 7.48797V21.1624C27.9993 24.9391 24.9388 27.9996 21.1621 27.9996H7.48765C6.7748 27.9997 6.07348 27.8197 5.44876 27.4764C4.82404 27.133 4.29615 26.6375 3.91406 26.0357L4.07295 26.0435L4.23183 26.0461H21.1621C22.4573 26.0461 23.6995 25.5316 24.6154 24.6157C25.5313 23.6998 26.0458 22.4576 26.0458 21.1624V4.23216C26.0459 4.12703 26.0429 4.02193 26.0367 3.91699ZM3.90625 14.9763C3.90625 14.1128 4.24927 13.2847 4.85986 12.6741C5.47044 12.0635 6.29857 11.7205 7.16206 11.7205C8.02556 11.7205 8.85369 12.0635 9.46427 12.6741C10.0749 13.2847 10.4179 14.1128 10.4179 14.9763C10.4179 15.8398 10.0749 16.668 9.46427 17.2785C8.85369 17.8891 8.02556 18.2322 7.16206 18.2322C6.29857 18.2322 5.47044 17.8891 4.85986 17.2785C4.24927 16.668 3.90625 15.8398 3.90625 14.9763ZM7.16206 13.674C6.81667 13.674 6.48541 13.8112 6.24118 14.0555C5.99695 14.2997 5.85974 14.6309 5.85974 14.9763C5.85974 15.3217 5.99695 15.653 6.24118 15.8972C6.48541 16.1415 6.81667 16.2787 7.16206 16.2787C7.50746 16.2787 7.83871 16.1415 8.08295 15.8972C8.32718 15.653 8.46439 15.3217 8.46439 14.9763C8.46439 14.6309 8.32718 14.2997 8.08295 14.0555C7.83871 13.8112 7.50746 13.674 7.16206 13.674Z"
          fill="#717171"
        />
        <path
          d="M13.0225 14.6495C13.0225 14.3905 13.1254 14.142 13.3086 13.9588C13.4918 13.7757 13.7402 13.6728 13.9993 13.6728H20.5109C20.77 13.6728 21.0184 13.7757 21.2016 13.9588C21.3847 14.142 21.4876 14.3905 21.4876 14.6495C21.4876 14.9086 21.3847 15.157 21.2016 15.3402C21.0184 15.5233 20.77 15.6262 20.5109 15.6262H13.9993C13.7402 15.6262 13.4918 15.5233 13.3086 15.3402C13.1254 15.157 13.0225 14.9086 13.0225 14.6495ZM3.90625 8.13788C3.90625 7.87883 4.00916 7.63039 4.19233 7.44722C4.37551 7.26404 4.62395 7.16113 4.88299 7.16113H20.5109C20.77 7.16113 21.0184 7.26404 21.2016 7.44722C21.3847 7.63039 21.4876 7.87883 21.4876 8.13788C21.4876 8.39693 21.3847 8.64536 21.2016 8.82854C21.0184 9.01171 20.77 9.11462 20.5109 9.11462H4.88299C4.62395 9.11462 4.37551 9.01171 4.19233 8.82854C4.00916 8.64536 3.90625 8.39693 3.90625 8.13788Z"
          fill="#717171"
        />
        <path
          d="M20.5116 0C21.0675 0 21.6178 0.109478 22.1314 0.322184C22.6449 0.53489 23.1115 0.846658 23.5045 1.23969C23.8975 1.63272 24.2093 2.09931 24.422 2.61283C24.6347 3.12635 24.7442 3.67673 24.7442 4.23256V20.5116C24.7442 21.0675 24.6347 21.6178 24.422 22.1314C24.2093 22.6449 23.8975 23.1115 23.5045 23.5045C23.1115 23.8975 22.6449 24.2093 22.1314 24.422C21.6178 24.6347 21.0675 24.7442 20.5116 24.7442H4.23256C3.67673 24.7442 3.12635 24.6347 2.61283 24.422C2.09931 24.2093 1.63272 23.8975 1.23969 23.5045C0.846658 23.1115 0.53489 22.6449 0.322184 22.1314C0.109478 21.6178 0 21.0675 0 20.5116V4.23256C0 3.11001 0.445929 2.03345 1.23969 1.23969C2.03345 0.445929 3.11001 0 4.23256 0H20.5116ZM20.5116 22.7907C21.1161 22.7907 21.6958 22.5506 22.1232 22.1232C22.5506 21.6958 22.7907 21.1161 22.7907 20.5116V4.23256C22.7907 3.62811 22.5506 3.04842 22.1232 2.62101C21.6958 2.1936 21.1161 1.95349 20.5116 1.95349H4.23256C3.62811 1.95349 3.04842 2.1936 2.62101 2.62101C2.1936 3.04842 1.95349 3.62811 1.95349 4.23256V20.5116C1.95297 20.8111 2.01157 21.1077 2.12592 21.3844C2.24028 21.6611 2.40813 21.9126 2.61986 22.1243C2.8316 22.3361 3.08305 22.5039 3.35979 22.6183C3.63653 22.7326 3.93312 22.7912 4.23256 22.7907H20.5116Z"
          fill="#717171"
        />
      </svg>
    ),
    icon_clicked: (
      <svg width="22" height="22" viewBox="0 0 28 28" fill="none">
        <path
          d="M26.0367 3.91699C26.6387 4.2981 27.1344 4.82545 27.4776 5.44987C27.8208 6.0743 28.0002 6.77545 27.9993 7.48797V21.1624C27.9993 24.9391 24.9388 27.9996 21.1621 27.9996H7.48765C6.7748 27.9997 6.07348 27.8197 5.44876 27.4764C4.82404 27.133 4.29615 26.6375 3.91406 26.0357L4.07295 26.0435L4.23183 26.0461H21.1621C22.4573 26.0461 23.6995 25.5316 24.6154 24.6157C25.5313 23.6998 26.0458 22.4576 26.0458 21.1624V4.23216C26.0459 4.12703 26.0429 4.02193 26.0367 3.91699ZM3.90625 14.9763C3.90625 14.1128 4.24927 13.2847 4.85986 12.6741C5.47044 12.0635 6.29857 11.7205 7.16206 11.7205C8.02556 11.7205 8.85369 12.0635 9.46427 12.6741C10.0749 13.2847 10.4179 14.1128 10.4179 14.9763C10.4179 15.8398 10.0749 16.668 9.46427 17.2785C8.85369 17.8891 8.02556 18.2322 7.16206 18.2322C6.29857 18.2322 5.47044 17.8891 4.85986 17.2785C4.24927 16.668 3.90625 15.8398 3.90625 14.9763ZM7.16206 13.674C6.81667 13.674 6.48541 13.8112 6.24118 14.0555C5.99695 14.2997 5.85974 14.6309 5.85974 14.9763C5.85974 15.3217 5.99695 15.653 6.24118 15.8972C6.48541 16.1415 6.81667 16.2787 7.16206 16.2787C7.50746 16.2787 7.83871 16.1415 8.08295 15.8972C8.32718 15.653 8.46439 15.3217 8.46439 14.9763C8.46439 14.6309 8.32718 14.2997 8.08295 14.0555C7.83871 13.8112 7.50746 13.674 7.16206 13.674Z"
          fill="black"
        />
        <path
          d="M13.0225 14.6495C13.0225 14.3905 13.1254 14.142 13.3086 13.9588C13.4918 13.7757 13.7402 13.6728 13.9993 13.6728H20.5109C20.77 13.6728 21.0184 13.7757 21.2016 13.9588C21.3847 14.142 21.4876 14.3905 21.4876 14.6495C21.4876 14.9086 21.3847 15.157 21.2016 15.3402C21.0184 15.5233 20.77 15.6262 20.5109 15.6262H13.9993C13.7402 15.6262 13.4918 15.5233 13.3086 15.3402C13.1254 15.157 13.0225 14.9086 13.0225 14.6495ZM3.90625 8.13788C3.90625 7.87883 4.00916 7.63039 4.19233 7.44722C4.37551 7.26404 4.62395 7.16113 4.88299 7.16113H20.5109C20.77 7.16113 21.0184 7.26404 21.2016 7.44722C21.3847 7.63039 21.4876 7.87883 21.4876 8.13788C21.4876 8.39693 21.3847 8.64536 21.2016 8.82854C21.0184 9.01171 20.77 9.11462 20.5109 9.11462H4.88299C4.62395 9.11462 4.37551 9.01171 4.19233 8.82854C4.00916 8.64536 3.90625 8.39693 3.90625 8.13788Z"
          fill="black"
        />
        <path
          d="M20.5116 0C21.0675 0 21.6178 0.109478 22.1314 0.322184C22.6449 0.53489 23.1115 0.846658 23.5045 1.23969C23.8975 1.63272 24.2093 2.09931 24.422 2.61283C24.6347 3.12635 24.7442 3.67673 24.7442 4.23256V20.5116C24.7442 21.0675 24.6347 21.6178 24.422 22.1314C24.2093 22.6449 23.8975 23.1115 23.5045 23.5045C23.1115 23.8975 22.6449 24.2093 22.1314 24.422C21.6178 24.6347 21.0675 24.7442 20.5116 24.7442H4.23256C3.67673 24.7442 3.12635 24.6347 2.61283 24.422C2.09931 24.2093 1.63272 23.8975 1.23969 23.5045C0.846658 23.1115 0.53489 22.6449 0.322184 22.1314C0.109478 21.6178 0 21.0675 0 20.5116V4.23256C0 3.11001 0.445929 2.03345 1.23969 1.23969C2.03345 0.445929 3.11001 0 4.23256 0H20.5116ZM20.5116 22.7907C21.1161 22.7907 21.6958 22.5506 22.1232 22.1232C22.5506 21.6958 22.7907 21.1161 22.7907 20.5116V4.23256C22.7907 3.62811 22.5506 3.04842 22.1232 2.62101C21.6958 2.1936 21.1161 1.95349 20.5116 1.95349H4.23256C3.62811 1.95349 3.04842 2.1936 2.62101 2.62101C2.1936 3.04842 1.95349 3.62811 1.95349 4.23256V20.5116C1.95297 20.8111 2.01157 21.1077 2.12592 21.3844C2.24028 21.6611 2.40813 21.9126 2.61986 22.1243C2.8316 22.3361 3.08305 22.5039 3.35979 22.6183C3.63653 22.7326 3.93312 22.7912 4.23256 22.7907H20.5116Z"
          fill="black"
        />
      </svg>
    ),
  },
];

function DashboardLayout() {
  const location = useLocation();
  const navigate = useNavigate();
  const { user } = useAuth();
  const [anchorEl, setAnchorEl] = useState(null);
  const [openModal, setOpenModal] = useState(false);
  const [openSubscriptionModal, setOpenSubscriptionModal] = useState(false);

  const open = Boolean(anchorEl);
  const handleClick = (event) => {
    setAnchorEl(event.currentTarget);
  };
  const handleClose = () => {
    setAnchorEl(null);
  };

  const currentNavItem = useMemo(() => {
    const findNavItem = (navItems, segment) => {
      for (const item of navItems) {
        if (item.segment === segment) {
          return item.title;
        }
        if (item.children) {
          const childItem = findNavItem(item.children, segment);
          if (childItem) {
            return childItem;
          }
        }
      }
      return "";
    };
    return findNavItem(navMenu, location.pathname.split("/")[1]) || "";
  }, [location.pathname]);

  const handleConfirmation = () => {
    navigate("/login");
    setOpenModal(false);
    localStorage.removeItem("token");
  };
  return (
    <div style={{ display: "flex", height: "100vh" }}>
      <div
        style={{
          minWidth: "14.8vw",
          height: "100vh",
          padding: "1rem",
          borderRight: "1px solid rgba(0, 0, 0, 0.12)",
          position: "relative",
        }}
      >
        <div>
          <div className="sidebar_brand">
            <img
              src={logo}
              alt="brand-logo"
              width={140}
              style={{ padding: "12px", margin: "0 auto", display: "flex" }}
            />
            <div className="side_chip" style={{margin:'10px auto'}}>
              <svg width="22" height="22" viewBox="0 0 25 25" fill="none">
                <path
                  d="M12.5006 14.5H12.5096M7.50055 22.5H17.5006M4.01855 10.806C3.63055 9.732 3.43655 9.195 3.51855 8.851C3.60955 8.474 3.87755 8.181 4.21955 8.083C4.53255 7.993 5.01955 8.21 5.99255 8.643C6.85255 9.025 7.28255 9.216 7.68755 9.206C8.13355 9.194 8.56155 9.016 8.90255 8.699C9.21255 8.412 9.41955 7.955 9.83455 7.041L10.7495 5.025C11.5135 3.342 11.8956 2.5 12.5006 2.5C13.1056 2.5 13.4876 3.342 14.2516 5.025L15.1666 7.041C15.5816 7.955 15.7895 8.412 16.0985 8.699C16.4395 9.015 16.8686 9.194 17.3135 9.206C17.7176 9.216 18.1485 9.025 19.0085 8.642C19.9825 8.21 20.4685 7.993 20.7815 8.083C21.1235 8.181 21.3916 8.474 21.4816 8.851C21.5646 9.195 21.3706 9.731 20.9816 10.806L19.3145 15.422C18.6005 17.397 18.2445 18.384 17.4976 18.942C16.7506 19.5 15.7856 19.5 13.8566 19.5H11.1445C9.21455 19.5 8.25055 19.5 7.50455 18.942C6.75755 18.384 6.40055 17.397 5.68655 15.422L4.01855 10.806Z"
                  stroke="url(#paint0_linear_1777_19668)"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <defs>
                  <linearGradient
                    id="paint0_linear_1777_19668"
                    x1="3.5"
                    y1="2.5"
                    x2="21.96"
                    y2="3.03997"
                    gradientUnits="userSpaceOnUse"
                  >
                    <stop stopColor="#EABE4B" />
                    <stop offset="0.333333" stopColor="#EABE4B" />
                    <stop offset="0.666667" stopColor="#F26D58" />
                    <stop offset="1" stopColor="#FF300F" />
                  </linearGradient>
                </defs>
              </svg>
              <span style={{ fontWeight: "500", fontStyle: "Inter" }}>
                CarbonZero Plan
               {/* {(user?.organization?.premiumPlan?.name)} */}
              </span>
            </div>
          </div>

          <div style={{marginTop:"3.2rem"}}>
            {navMenu.map((item, index) => (
              <div key={index}>
                {item.kind === "divider" ? (
                  <Divider />
                ) : (
                  <Box
                    sx={{
                      padding: "0.8rem",
                      cursor: "pointer",
                      display: "flex",
                      alignItems: "center",
                      background: " #E6F8F2",
                      bgcolor:
                        location.pathname === `/${item.segment}`
                          ? "#E6F8F2"
                          : "inherit",
                      borderLeft:
                        location.pathname === `/${item.segment}`
                          ? "3px solid #369D9C"
                          : "3px solid transparent",
                      fontWeight:
                        location.pathname === `/${item.segment}`
                          ? "700"
                          : "inherit",
                      "&:hover": {
                        bgcolor: "#E6F8F2",
                        color: "black",
                      },
                    }}
                    onClick={() => {
                      navigate(`/${item.segment}`);
                    }}
                  >
                    <p
                      style={{
                        color:
                          location.pathname === `/${item.segment}`
                            ? "#000"
                            : "#717171",
                        padding: "0",
                        margin: 0,
                        display: "flex",
                        alignItems: "center",
                      }}
                    >
                      {location.pathname === `/${item.segment}`
                        ? item.icon_clicked
                        : item.icon_normal}
                    </p>
                    <Typography
                      sx={{
                        marginLeft: "10px",
                        fontWeight: "500",
                        fontSize: "0.8rem",
                        color:
                          location.pathname === `/${item.segment}`
                            ? "black"
                            : "#717171",
                      }}
                    >
                      {item.title}
                    </Typography>
                  </Box>
                )}
              </div>
            ))}
          </div>
        </div>
        {(user?.organization?.premiumPlan?.name) !== "CarbonZero" &&
        <div className="subs_card">
          <div>
            <svg width="28" height="28" viewBox="0 0 40 40" fill="none">
              <g clipPath="url(#clip0_1777_24408)">
                <path
                  d="M20 22.5V5"
                  stroke="white"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M33.75 22.5V32.5H6.25V22.5"
                  stroke="white"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M13.75 11.25L20 5L26.25 11.25"
                  stroke="white"
                  strokeWidth="2"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </g>
              <defs>
                <clipPath id="clip0_1777_24408">
                  <rect width="40" height="40" fill="white" />
                </clipPath>
              </defs>
            </svg>
            <div>
              <p
                style={{
                  fontSize: "0.7rem",
                  fontWeight: "500",
                  marginBottom: "5px",
                  marginTop: "0px",
                }}
              >
                Upgrade to {(user?.organization?.premiumPlan?.name)=== "FootPrint"?"OffSet":"CarbonZero"}
              </p>
              <p
                style={{
                  fontSize: "0.60rem",
                  fontWeight: "300",
                  margin: "0",
                }}
              >
                Reduce emissions, save costs, protect environment.
              </p>
            </div>
          </div>
          <div style={{ display: "flex", gap: "0.4rem" }}>
            <p
              style={{
                fontSize: "0.7rem",
                fontWeight: "300",
                padding: "0",
                margin: "0 0",
                cursor: "pointer",
              }}
            >
              Dismiss
            </p>
            <button
              style={{
                fontSize: "0.7rem",
                fontWeight: "500",
                padding: "0",
                margin: "0 0",
                cursor: "pointer",
                color: '#fff',
                border: 'none',
                background: 'transparent'
              }}
              onClick={() => setOpenSubscriptionModal(true)}
            >
              Upgrade Now
            </button>
          </div>
        </div>
        }
      </div>

      <Box sx={{ flexGrow: 1, overflow: "auto" }}>
        <Box
          sx={{
            position: "sticky",
            top: 0,
            left: 0,
            p: 3,
            display: "flex",
            alignItems: "center",
            justifyContent: "space-between",
            borderBottom: "1px solid rgba(217, 217, 217, 0.40)",
            height: "7vh",
            bgcolor: "#fff",
            zIndex: 100,
          }}
        >
          <Typography
            sx={{
              color: "#000",
              fontSize: "1.2rem",
              fontWeight: "500",
            }}
          >
            {currentNavItem}
          </Typography>
          <Toolbar
            sx={{
              display: "flex",
              alignItems: "center",
              gap: "2rem",
            }}
          >
            <IconButton color="inherit" sx={{ position: "relative" }}>
              <CustomBadgeIcon
                badgeContent={5}
                badgeColor="red"
                badgeTextColor="white"
              />
            </IconButton>
            <div
              onClick={handleClick}
              style={{
                display: "flex",
                alignItems: "center",
                gap: "10px",
                cursor: "pointer",
              }}
            >
              <Avatar
                src={avatar}
                alt="User Img"
                style={{ width: "1.9rem", height: "1.9rem" }}
              />
              <Typography
                sx={{
                  color: "#000",
                  fontSize: "0.875rem",
                  fontWeight: "500",
                }}
              >
                {user?.name}
              </Typography>
              <p
                style={{
                  // margin: 0,
                  display: "flex",
                  alignItems: "center",
                }}
              >
                <svg width="18" height="18" viewBox="0 0 16 16" fill="none">
                  <path
                    d="M13 6L8 11L3 6"
                    stroke="black"
                    strokeWidth="1.5"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>
              </p>
            </div>{" "}
            <Menu
              id="basic-menu"
              anchorEl={anchorEl}
              open={open}
              onClose={handleClose}
              MenuListProps={{
                "aria-labelledby": "basic-button",
              }}
            >
              <MenuItem onClick={() => setOpenModal(true)}>
                <div className="profile_menu_btn">
                  <svg width="18" height="18" viewBox="0 0 24 25" fill="none">
                    <path
                      d="M9 21.5H5C4.46957 21.5 3.96086 21.2893 3.58579 20.9142C3.21071 20.5391 3 20.0304 3 19.5V5.5C3 4.96957 3.21071 4.46086 3.58579 4.08579C3.96086 3.71071 4.46957 3.5 5 3.5H9"
                      stroke="black"
                      strokeWidth="1.5"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                    />
                    <path
                      d="M16.0002 17.5L21.0002 12.5L16.0002 7.5"
                      stroke="black"
                      strokeWidth="1.5"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                    />
                    <path
                      d="M21 12.5H9"
                      stroke="black"
                      strokeWidth="1.5"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                    />
                  </svg>
                  <span>Logout</span>
                </div>
              </MenuItem>
            </Menu>{" "}
            <ConfirmationModal
              open={openModal}
              setOpenModal={setOpenModal}
              confirm={handleConfirmation}
              title={"Are you sure want to log out?"}
            />
          </Toolbar>
        </Box>
        <Box sx={{ p: 3, flexGrow: 1 }}>
          <Outlet />
        </Box>
      </Box>
      <SubscriptionModal
        open={openSubscriptionModal}
        onClose={() => setOpenSubscriptionModal(false)}
      />
    </div>
  );
}

export default DashboardLayout;
